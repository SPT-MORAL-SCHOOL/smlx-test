<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏ò‡∏£‡∏£‡∏° ‡∏™‡∏û‡∏ê. ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏ï‡∏£‡∏µ‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    <style>
        /* ==========================================================
           1. CSS Reset & Global Styles
           ========================================================== */
        :root {
            --color-primary: #004d99; /* ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏° ‡∏™‡∏ï‡∏£‡∏µ‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á */
            --color-secondary: #ffffff; /* ‡∏Ç‡∏≤‡∏ß */
            --color-shadow: rgba(0, 0, 0, 0.1);
            --color-hover: rgba(0, 77, 153, 0.08); /* ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
            --color-background: #f4f7f6; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≠‡∏ô‡πÜ */
            --border-radius: 12px;
            --transparency-bg: rgba(255, 255, 255, 0.95); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Sarabun', sans-serif;
        }

        body {
            background-color: var(--color-background);
            line-height: 1.6;
        }

        /* ==========================================================
           2. Common Styles (‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô, ‡πÄ‡∏á‡∏≤, ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á)
           ========================================================== */
        .card {
            background-color: var(--transparency-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 5px 20px var(--color-shadow);
            padding: 30px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .interactive-element {
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 8px;
        }

        .interactive-element:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transform: translateY(-1px);
        }
        
        .interactive-element:active {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
        }

        /* Input & Button Styles */
        input:not([type="checkbox"]), textarea, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.9);
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 5px rgba(0, 77, 153, 0.3);
        }

        button.btn-primary {
            padding: 12px 20px;
            background-color: var(--color-primary);
            color: white;
            border: none;
            font-weight: 600;
        }

        button.btn-secondary {
            background-color: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
            padding: 12px 20px;
            font-weight: 600;
        }

        /* ==========================================================
           3. Authentication View
           ========================================================== */
        #auth-view {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        #auth-view .card {
            width: 90%;
            max-width: 450px;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-container img {
            width: 100px;
            height: 100px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        
        .logo-container h2 {
            color: var(--color-primary);
            font-weight: 700;
        }

        /* ==========================================================
           4. Main Application View (App-View)
           ========================================================== */
        .main-app-container {
            display: none;
            min-height: 100vh;
            background-color: var(--color-background);
        }

        /* Header & Navigation */
        #app-header {
            background-color: var(--transparency-bg);
            padding: 15px 30px;
            box-shadow: 0 2px 10px var(--color-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        #app-header nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        #main-menu {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .menu-item {
            padding: 10px 15px;
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        
        .menu-item.active {
            background-color: var(--color-primary);
            color: white;
            font-weight: 600;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .menu-item:not(.active):hover {
            background-color: var(--color-hover);
            color: var(--color-primary);
        }

        /* Content Area */
        #app-content {
            padding: 30px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ==========================================================
           5. Footer & Responsive Design
           ========================================================= */
        .footer {
            width: 100%;
            text-align: center;
            padding: 15px 0;
            font-size: 0.8em;
            color: #777;
            background-color: var(--color-background);
        }
        
        /* Mobile Adjustments */
        @media (max-width: 768px) {
            #app-header nav {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            #main-menu {
                justify-content: center;
            }
        }
    </style>
</head>
<body>

    <div id="auth-view">
        <div class="card">
            <div class="logo-container">
                <img src="https://img5.pic.in.th/file/secure-sv1/IMG_25650953161d1c1bbdd8.jpeg" alt="Logo ‡∏™‡∏ï‡∏£‡∏µ‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á">
                <h2 id="form-title">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <p style="color: #666; font-size: 0.9em;">‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏ò‡∏£‡∏£‡∏° ‡∏™‡∏û‡∏ê.</p>
            </div>

            <form id="login-form">
                <input type="email" id="login-email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" required>
                <input type="password" id="login-password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required>
                <button type="submit" class="btn-primary interactive-element">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            </form>

            <form id="register-form" style="display: none;">
                <input type="text" id="reg-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•" required>
                <input type="text" id="reg-student-id" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á" required>
                <input type="email" id="reg-email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" required>
                <input type="password" id="reg-password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (6 ‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ)" required>
                <button type="submit" class="btn-primary interactive-element">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                <p style="text-align: center; margin-top: 10px; font-size: 0.8em; color: #888;">*‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å Admin ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
            </form>
            
            <div class="form-switch" style="text-align: center; margin-top: 20px;">
                <p id="switch-text">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="#" onclick="switchForm('register')">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></p>
            </div>

            <div id="error-message" style="color: red; text-align: center; margin-top: 15px; display: none;"></div>
        </div>
    </div>
    
    <div id="app-view" class="main-app-container">
        <header id="app-header">
            <nav>
                <div style="font-size: 1.2em; font-weight: 700; color: var(--color-primary);">SPT MORAL SYSTEM</div>
                <div id="main-menu">
                    </div>
                <button id="logout-btn" class="btn-secondary interactive-element" style="padding: 8px 15px;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </nav>
        </header>

        <main id="app-content">
            </main>

    </div>

    <footer class="footer">
        &copy; 2024 SPT MORAL SCHOOL - ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏ò‡∏£‡∏£‡∏° ‡∏™‡∏û‡∏ê. ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏ï‡∏£‡∏µ‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á | All Rights Reserved
    </footer>

    <script>
        // 1. Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAOgu5-F-iLrFdPjJ0QW2BxorG-SNtZOKk",
            authDomain: "smlc-30912.firebaseapp.com",
            projectId: "smlc-30912",
            storageBucket: "smlc-30912.firebasestorage.app",
            messagingSenderId: "264699595987",
            appId: "1:264699595987:web:3a0388e5aa87397b5e1826",
            measurementId: "G-35KJ6PSQFW"
        };

        // Initialize Firebase Services
        const app = firebase.initializeApp(firebaseConfig);
        const auth = app.auth();
        const db = app.firestore();
        const storage = app.storage();

        // Global Variables
        const ADMIN_EMAIL = 'sptmorral@spt.ac.th';
        let currentUserData = null; 
        let currentPage = '';

        // ==========================================================
        // UI Utility Functions
        // ==========================================================
        
        /** Switches between Login and Register Forms */
        function switchForm(mode) {
            document.getElementById('login-form').style.display = (mode === 'login') ? 'block' : 'none';
            document.getElementById('register-form').style.display = (mode === 'register') ? 'block' : 'none';
            document.getElementById('form-title').textContent = (mode === 'login') ? '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö' : '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
            document.getElementById('switch-text').innerHTML = (mode === 'login') 
                ? '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="#" onclick="switchForm(\'register\')">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>' 
                : '‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? <a href="#" onclick="switchForm(\'login\')">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>';
            document.getElementById('error-message').style.display = 'none';
        }

        /** Displays an error message on the auth screen */
        function displayError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            setTimeout(() => { errorElement.style.display = 'none'; }, 5000);
        }

        // ==========================================================
        // Authentication Logic
        // ==========================================================
        
        // 1. Handle User Login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            try {
                // Firebase signs in the user
                await auth.signInWithEmailAndPassword(email, password);
                // onAuthStateChanged will handle the rest
            } catch (error) {
                console.error("Login Error:", error.code);
                let message = "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß. ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô";
                if (error.code === 'auth/user-not-found') message = "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö";
                else if (error.code === 'auth/wrong-password') message = "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
                displayError(message);
            }
        });

        // 2. Handle User Registration
        document.getElementById('register-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            const name = document.getElementById('reg-name').value;
            const studentId = document.getElementById('reg-student-id').value;

            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;

                // Save user details to Firestore for Admin approval
                await db.collection('users').doc(user.uid).set({
                    email: email,
                    name: name,
                    studentId: studentId,
                    isAdmin: (email === ADMIN_EMAIL),
                    status: 'Pending', // Requires Admin approval
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                alert('‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å Admin');
                switchForm('login');
            } catch (error) {
                console.error("Register Error:", error.code);
                let message = "‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß. ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";
                if (error.code === 'auth/email-already-in-use') message = "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß";
                else if (error.code === 'auth/weak-password') message = "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£";
                displayError(message);
            }
        });

        // 3. Handle Logout
        document.getElementById('logout-btn').addEventListener('click', () => {
            auth.signOut();
        });

        // 4. Authentication State Change Listener
        auth.onAuthStateChanged(async (user) => {
            const authView = document.getElementById('auth-view');
            const appView = document.getElementById('app-view');

            if (user) {
                // User signed in, fetch role and status
                const doc = await db.collection('users').doc(user.uid).get();
                
                if (doc.exists) {
                    currentUserData = doc.data();

                    if (currentUserData.status === 'Approved' || currentUserData.isAdmin) {
                        // User is approved or is the Admin
                        authView.style.display = 'none';
                        appView.style.display = 'block';
                        loadAppLayout(currentUserData.isAdmin); 
                        navigateTo('home');

                    } else if (currentUserData.status === 'Pending') {
                        // Pending approval
                        auth.signOut(); 
                        alert('‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å Admin');
                    }
                } else {
                    // Data inconsistency
                    auth.signOut();
                    displayError('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Admin');
                }
                
            } else {
                // User signed out, show login view
                authView.style.display = 'flex';
                appView.style.display = 'none';
                currentUserData = null;
                switchForm('login');
            }
        });


        // ==========================================================
        // Application Layout & Navigation Logic (‡∏´‡∏•‡∏±‡∏á Login)
        // ==========================================================

        const pages = {
            'home': { title: '‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å', isAdmin: false, content: 'loadHomeContent' },
            'activities': { title: '‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°', isAdmin: false, content: 'loadActivitiesContent' },
            'borrow': { title: '‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏°-‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå', isAdmin: false, content: 'loadBorrowContent' },
            'calendar': { title: '‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô', isAdmin: false, content: 'loadCalendarContent' },
            'links': { title: '‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏¥‡∏á‡∏Å‡πå', isAdmin: false, content: 'loadLinksContent' },
            'documents': { title: '‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£', isAdmin: false, content: 'loadDocumentsContent' },
            'admin': { title: '‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö', isAdmin: true, content: 'loadAdminContent' }
        };
        
        /** Builds the main menu based on user role. */
        function loadAppLayout(isAdmin) {
            const menuContainer = document.getElementById('main-menu');
            menuContainer.innerHTML = '';

            for (const key in pages) {
                const page = pages[key];
                if (page.isAdmin && !isAdmin) continue; // Hide Admin page from regular users
                
                const menuItem = document.createElement('a');
                menuItem.href = '#';
                menuItem.textContent = page.title;
                menuItem.id = `menu-${key}`;
                menuItem.className = 'menu-item interactive-element';
                menuItem.onclick = (e) => {
                    e.preventDefault();
                    navigateTo(key);
                };
                menuContainer.appendChild(menuItem);
            }
        }
        
        /** Changes the view and highlights the menu item. */
        function navigateTo(pageKey) {
            if (!pages[pageKey]) return;
            
            // 1. Highlight Menu
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            const currentMenu = document.getElementById(`menu-${pageKey}`);
            if (currentMenu) currentMenu.classList.add('active');
            currentPage = pageKey;

            // 2. Load Content (Call the specific content function)
            const contentLoader = pages[pageKey].content;
            if (typeof window[contentLoader] === 'function') {
                window[contentLoader]();
            } else {
                document.getElementById('app-content').innerHTML = `<div class="card"><h1>${pages[pageKey].title}</h1><p>‚ö†Ô∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>${contentLoader}</code> ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô. ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Firebase ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p></div>`;
            }
        }

        // ==========================================================
        // Page Content Rendering Functions (MOCK UP)
        // NOTE: Functions below are MOCKUPs. You must fill them 
        // with the actual Firebase logic (CRUD operations).
        // ==========================================================

        function loadHomeContent() {
            document.getElementById('app-content').innerHTML = `
                <div class="card">
                    <h1>üìä ${pages.home.title}</h1>
                    <p style="margin-bottom: 20px;">‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°-‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                </div>
                
                <div class="card">
                    <h2>üóìÔ∏è ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Full Calendar Display)</h2>
                    <div id="home-calendar-display" style="min-height: 400px; background: #f9f9f9; border-radius: 8px; padding: 20px;">
                        <p>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏î‡πâ‡∏ß‡∏¢ FullCalendar JS Library ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firestore <code>calendar</code> collection</p>
                    </div>
                </div>

                <div class="card">
                    <h2>üõ†Ô∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏¢‡∏∑‡∏°‡∏≠‡∏¢‡∏π‡πà (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)</h2>
                    <div id="home-borrow-display">
                        <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà <code>status: 'Borrowing'</code> ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                        <ul>
                            <li>[Mock] ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ A ‡∏¢‡∏∑‡∏° Projector (‡∏ñ‡∏∂‡∏á 25/10/2024)</li>
                            <li>[Mock] ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ B ‡∏¢‡∏∑‡∏° Megaphone (‡∏ñ‡∏∂‡∏á 26/10/2024)</li>
                        </ul>
                    </div>
                </div>
            `;
            // *‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°*
        }

        function loadActivitiesContent() {
            const isAdmin = currentUserData.isAdmin;
            const content = `
                <div class="card">
                    <h1>üìù ${pages.activities.title}</h1>
                    <p>‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ Admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</p>
                    <button class="btn-primary interactive-element" onclick="showActivityForm()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                </div>
                
                <div id="activity-list" class="card" style="margin-top: 20px;">
                    <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏≠/‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</h2>
                    <p>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${isAdmin ? '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' : '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß'}) ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Card ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                    <div class="card interactive-element" style="padding: 15px; margin-top: 10px; border: 1px solid #eee;">
                        <strong>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°:</strong> ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô <br>
                        <strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ | <strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> 30 ‡∏ï.‡∏Ñ.
                    </div>
                </div>
            `;
            document.getElementById('app-content').innerHTML = content;
        }

        function loadBorrowContent() {
            const isAdmin = currentUserData.isAdmin;
            document.getElementById('app-content').innerHTML = `
                <div class="card">
                    <h1>üõ†Ô∏è ${pages.borrow.title}</h1>
                    <h2>1. ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h2>
                    <form id="borrow-form">
                        <select id="borrow-item" required><option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</option></select>
                        <input type="number" id="borrow-qty" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" required min="1">
                        <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏°:</label><input type="date" id="borrow-start" required>
                        <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô:</label><input type="date" id="borrow-end" required>
                        <textarea id="borrow-purpose" placeholder="‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°" required></textarea>
                        <button type="submit" class="btn-primary interactive-element">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°</button>
                    </form>
                </div>

                <div class="card">
                    <h2>2. ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏¢‡∏∑‡∏°‡∏≠‡∏¢‡∏π‡πà (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô)</h2>
                    <div id="my-borrow-list">
                        <div class="card interactive-element" style="display: flex; justify-content: space-between; align-items: center; padding: 15px; margin-top: 10px;">
                            <span>Projector (‡∏¢‡∏∑‡∏°‡∏ñ‡∏∂‡∏á 25/10)</span>
                            <button class="btn-secondary" onclick="confirmReturn('itemId123')">‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</button>
                        </div>
                    </div>
                </div>
                ${isAdmin ? '<div class="card"><h2>3. ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (Admin)</h2><p>‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á</p></div>' : ''}
            `;
            // *‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°, ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤, ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô*
        }

        function loadCalendarContent() {
            const isAdmin = currentUserData.isAdmin;
            document.getElementById('app-content').innerHTML = `
                <div class="card">
                    <h1>üóìÔ∏è ${pages.calendar.title}</h1>
                    <p>‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ Admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</p>
                    <form id="calendar-form">
                        <input type="text" id="cal-detail" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°/‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°" required>
                        <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</label>
                        <select id="cal-type" required>
                            <option value="activity">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</option>
                            <option value="meeting">‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</option>
                        </select>
                        <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°:</label><input type="datetime-local" id="cal-start" required>
                        <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î:</label><input type="datetime-local" id="cal-end" required>
                        <input type="text" id="cal-location" placeholder="‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà" required>
                        <button type="submit" class="btn-primary interactive-element">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</button>
                    </form>
                </div>
                
                <div class="card">
                    <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</h2>
                    <p>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                </div>
            `;
            // *‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥*
        }

        function loadLinksContent() {
            const isAdmin = currentUserData.isAdmin;
            document.getElementById('app-content').innerHTML = `
                <div class="card">
                    <h1>üîó ${pages.links.title}</h1>
                    <p>‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</p>
                    ${isAdmin ? `
                    <div style="margin-bottom: 20px;">
                        <button class="btn-primary interactive-element" onclick="showAddLinkForm()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    ` : ''}
                    
                    <div id="links-list">
                        <a href="#" target="_blank" class="card interactive-element" style="display: block; padding: 15px; text-decoration: none; color: ${isAdmin ? '#333' : 'var(--color-primary)'};">
                            <strong>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå:</strong> ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏ï‡∏£‡∏µ‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á | **URL:** spt.ac.th
                        </a>
                    </div>
                </div>
            `;
            // *‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firestore ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç*
        }

        function loadDocumentsContent() {
            const isAdmin = currentUserData.isAdmin;
            document.getElementById('app-content').innerHTML = `
                <div class="card">
                    <h1>üìÑ ${pages.documents.title}</h1>
                    <p>‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î/‡∏î‡∏π</p>
                    ${isAdmin ? `
                    <div style="margin-bottom: 20px;">
                        <button class="btn-primary interactive-element" onclick="showAddDocumentForm()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    ` : ''}
                    
                    <div id="documents-list">
                        <div class="card interactive-element" style="padding: 15px; display: flex; justify-content: space-between; align-items: center;">
                            <span><strong>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:</strong> ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏ò‡∏£‡∏£‡∏° 2567 (PDF)</span>
                            <a href="#" target="_blank" class="btn-secondary" style="padding: 5px 10px; text-decoration: none;">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</a>
                        </div>
                    </div>
                </div>
            `;
            // *‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firestore/Storage ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç*
        }

        function loadAdminContent() {
            document.getElementById('app-content').innerHTML = `
                <div class="card">
                    <h1>‚öôÔ∏è ${pages.admin.title}</h1>
                    <p style="font-size: 1.1em; font-weight: 600; color: red;">‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                </div>
                
                <div class="card">
                    <h2>1. ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                    <p>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò:</p>
                    <ul>
                        <li><a href="#">‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å (Waiting: 5)</a></li>
                        <li><a href="#">‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Waiting: 2)</a></li>
                        <li><a href="#">‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô (Waiting: 1)</a></li>
                        <li><a href="#">‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (Waiting: 3)</a></li>
                    </ul>
                    <p>‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏∞‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ <strong>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</strong></p>
                </div>
                
                <div class="card">
                    <h2>2. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h2>
                    <p>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Approved/Pending)</p>
                    <table style="width: 100%; margin-top: 15px;">
                        <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
                        <tbody>
                            <tr><td>User A</td><td>userA@spt.ac.th</td><td>Approved</td><td><button onclick="changePass('uidA')">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button> <button onclick="deleteAccount('uidA')">‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button></td></tr>
                            <tr><td>User B</td><td>userB@spt.ac.th</td><td>Pending</td><td><button onclick="approveUser('uidB')">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button> <button onclick="deleteAccount('uidB')">‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò/‡∏•‡∏ö</button></td></tr>
                        </tbody>
                    </table>
                </div>
            `;
            // *‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏•‡∏ö/‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô*
        }

        // Initialize on load
        // The Firebase auth.onAuthStateChanged listener will automatically determine 
        // whether to show the auth-view or app-view.
    </script>
</body>
</html>
